<?xml version='1.0' encoding='utf-8'?>

<section xml:id="FN5" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Combining and Composing Functions (FN5) </title>
    <objectives>
    <ul>
      <li>
        <xi:include href="outcomes/05.ptx" />
      </li>
    </ul>
    </objectives>
    <subsection>
    <title>Activities</title>
    
    <activity xml:id="activity-fn5-sum-diff">
      <introduction>
        <p> Let <m>f(x)=x^2-3x</m> and <m>g(x)= x^3-4x^2+7</m>. </p> 
      </introduction>
      
      <task>
        <statement>
          <p>
            Which of the following seems likely to be the most simplified form of <m>f(x)+g(x)</m>?

            <ol marker= "A.">  
              <li> <m>x^2-3x+x^3-4x^2+7 </m></li>
              <li> <m>x^5-7x^3+7</m></li>
              <li> <m>-x^3+5x^2-3x-7 </m></li>
              <li> <m>x^3-3x^2-3x+7</m></li>
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              D. (A isn't simplified, B added exponents and coefficients down the line, C is subtraction)
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Which of the following seems likely to be the most simplified form of <m>f(x)-g(x)</m>?

            <ol marker= "A.">  
              <li> <m>x^3-3x^2-3x+7 </m></li>
              <li> <m>-x^3+5x^2-3x-7</m></li>
              <li> <m>-x^3-3x^2-3x+7  </m></li>
              <li> <m>x^2-3x-x^3+4x^2-7</m></li>
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              B. (A is added, C didn't distribute the negative to all terms of <m>g(x)</m>, D isn't simplified )
            </p>
          </answer>
      </task>
    
 
    </activity>


    <activity xml:id="activity-fn5-prod-quot">
      <introduction>
        <p> Let <m>f(x)=\sqrt{x+1}</m> and <m>g(x)= 5x</m>. </p> 
      </introduction>
      
      <task>
        <statement>
          <p>
            Which of the following seems likely to be the most simplified form of <m>f(x)\cdot g(x)</m>?

            <ol marker= "A.">  
              <li> <m>\sqrt{5x+1} </m></li>
              <li> <m>5\sqrt{x+1}</m></li>
              <li> <m>\sqrt{5x^2+5x}</m></li>
              <li> <m>5x\sqrt{x+1}</m></li>
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              D. (A is f(g(x)), B is <m>g(f(x))</m>, C distributed under the radical)
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Which of the following seems likely to be the most simplified form of  <m>\frac{f(x)}{g(x)}</m>?

            <ol marker= "A.">  
              <li> <m>\frac{5x}{\sqrt{x+1}}
              </m></li>
              <li> <m>\frac{\sqrt{x+1}}{5x}</m></li>
              <li> <m> \sqrt{\frac{x}{5x}+\frac{1}{5x}} </m></li>
              <li> <m>\sqrt{\frac{5x}{x}+\frac{5x}{1}} </m></li>
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              B. (A is g/f, C divides each term under the radical by g, D flips the fractions in C )
            </p>
          </answer>
      </task>

    </activity>

    <remark>
      <p>
        In <xref ref="activity-fn5-sum-diff" /> and <xref ref="activity-fn5-prod-quot" />, we have found the sum, difference, product, and quotient of two functions. We can use the following notation for these newly created functions:
        <md>
          <mrow>(f+g)(x) \amp = f(x)+g(x) </mrow>
          <mrow>(f-g)(x) \amp = f(x)-g(x) </mrow>
          <mrow>(f\cdot g)(x) \amp = f(x)\cdot g(x) </mrow>
          <mrow>\left(\frac{f}{g}\right)(x) \amp = \frac{f(x)}{g(x)}</mrow>
        </md>

      With <m>\left(\frac{f}{g}\right)(x) </m>, we note that the quotient is only defined when <m>g(x)\neq 0</m>.

      </p>
    </remark>

    <activity xml:id="activity-fn5-composition-1">
      <introduction>
        <p> Let <m>\displaystyle f(x)=\frac{1}{3x-5}</m>. </p> 
      </introduction>
      
      <task>
        <statement>
          <p>
            Find <m>f(4)</m>.
            <hint>
              <p>
                See <xref ref="remark-fn-notation"/> for a reminder of what this notation means!
              </p>
            </hint>

            <ol marker= "A.">  
              <li> <m>\frac{4}{3x-5}</m> </li>
              <li> <m>\frac{1}{4(3x-5)}</m> </li>
              <li> <m>\frac{1}{7}</m> </li>
              <li> <m>7</m> </li>
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              C. 
            </p>
          </answer>
      </task>



      <task>
        <statement>
          <p>
            If you were asked to find <m>f(x^3-2)</m>, how do you think you would proceed?

            <ol marker= "A.">  
              <li> Multiply the original function <m>\frac{1}{3x-5}</m> by <m>x^3-2</m>.</li>
              <li> Plug the expression <m>x^3-2</m> in for all the <m>x</m>-values in <m>\frac{1}{3x-5}</m>. </li>
              <li> Plug the original function <m>\frac{1}{3x-5}</m> in for all the <m>x</m>-values in <m>x^3-2</m>. </li>
              <li> Multiply <m>3x-5</m> by <m>
                x^3-2</m>. </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              B. (A is multiplying, C is g(f))
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Find <m>f(x^3-2)</m>.

            <ol marker= "A.">  
              <li> <m>\frac{1}{3x-5} \cdot (x^3-2)</m></li>
              <li> <m>\frac{1}{3(x^3-2)-5}</m></li>
              <li>  <m>\left(\frac{1}{3x-5} \right)^3-2</m> </li>
              <li> <m>(3x-5)(x^3-2)</m> </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              B. (these mirror the previous answer choices)
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            What if we gave the expression <m>x^3-2</m> a name? Let's define <m>g(x)=x^3-2</m>. What's another way we could denote <m>f(x^3-2)</m>
            <ol marker= "A.">  
              <li> <m>f(x) \cdot g(x)</m></li>
              <li> <m>g(f(x))</m></li>
              <li>  <m>f(g(x))</m> </li>
              <li> <m>\frac{f(x)}{g(x)}  </m> </li>
              
            </ol>
          </p>
        </statement>
        <answer>
          <p>
            C. 
          </p>
        </answer>
      </task>

    </activity>

    <!-- Definition adapted from APC. -->

    <definition xml:id="def-fn5-composition"> 
  		<statement>
  			<p>
  				Give the functions <m>f(x)</m> and <m>g(x)</m>, we define the <term>composition of <m>f</m> and <m>g</m></term> to be the new function <m>h(x)</m> given by 
  				<me>
  					h(x) = f(g(x))
  				</me>.
  				We also sometimes use the notation <me>f \circ g</me> or <me>(f \circ g)(x)</me> to refer to <m>f(g(x))</m>.
  			</p>
  		</statement>
  	</definition>

    <remark>
      <p>
        When discussing the composite function <m>f(g(x))</m>, also written as <m>(f\circ g)(x)</m>, we often call <m>g(x)</m> the "inner function" and <m>f(x)</m> the "outer function".  It is important to note that the inner function is actually the first function that gets applied to a given input, and then outer function is applied to the output of the inner function. 
      

      </p>
    </remark>

    <activity xml:id="activity-fn5-composition-2">
      <introduction>
        <p> Let <m>\displaystyle f(x)=\frac{1}{3x-5}</m> and <m>g(x)=x^3-2</m>. </p> 
      </introduction>
      
      <task>
        <statement>
          <p>
            Find <m>f(g(x))</m>.

            <ol marker= "A.">  
              <li> <m>\frac{x^3-2}{3x-5}</m> </li>
              <li> <m>\frac{1}{(3x-5)(x^3-2)}</m> </li>
              <li> <m>\frac{1}{3(x^3-2)-5}</m> </li>
              <li> <m>(3x-5)^3-2</m> </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              C. 
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Find <m>g(f(x))</m>.

            <ol marker= "A.">  
              <li> <m>\frac{x^3-2}{3x-5}</m> </li>
              <li> <m>\frac{1}{(3x-5)(x^3-2)}</m> </li>
              <li> <m>\frac{1}{3(x^3-2)-5}</m> </li>
              <li> <m>(3x-5)^3-2</m> </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              D. 
            </p>
          </answer>
        </task>

    </activity>

    <remark>
      <p>
        We can also evaluate the composition of two functions at a particular value just as we did with one function. For example, we may be asked to find something like <m>f(g(2))</m> or <m>(g\circ f)(-3)</m>.
      </p>
    </remark>

    <activity xml:id="activity-fn5-composition-3">
      <introduction>
        <p> Let <m>\displaystyle f(x)=2x^3</m> and <m>g(x)=\sqrt{6-x}</m>. </p> 
      </introduction>
      
      <task>
        <statement>
          <p>
            Find <m>f(g(2))</m>.

            <ol marker= "A.">  
              <li> <m>14</m> </li>
              <li> <m>16</m> </li>
              <li> <m>18</m> </li>
              <li> <m>20</m> </li>
              <li> undefined </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              B. 
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Find <m>(g \circ f)(-3)</m>.

            <ol marker= "A.">  
              <li> <m>50</m> </li>
              <li> <m>54</m> </li>
              <li> <m>\sqrt{60}</m> </li>
              <li> <m>\sqrt{-48}</m> </li>
              <li> undefined </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              C. (B is <m>f \circ g</m>, D has a mistake in subtraction)
            </p>
          </answer>
      </task>

      <task>
        <statement>
          <p>
            Find <m>(f \circ g)(10)</m>.

            <ol marker= "A.">  
              <li> <m>2(\sqrt{-4})^3</m> </li>
              <li> <m>16</m> </li>
              <li> <m>\sqrt{-1994}</m> </li>
              <li> <m>-16</m> </li>
              <li> undefined </li>
              
            </ol>
          </p>
        </statement>
          <answer>
            <p>
              E. (A ignores domain, B assumes <m>\sqrt{-4}</m> is 2, C is <m>g \circ f</m>, but ignoring domain,  D assumes <m>\sqrt{-4}</m> is -2)
            </p>
          </answer>
      </task>

     

    </activity>

<remark>
  <p>
    As we saw in <xref ref="activity-fn5-composition-3"/>, in order for a composite function to make sense, we need to ensure that the range of the inner function lies within the domain of the outer function so that the resulting composite function is defined at every possible input.

  </p>
</remark>

<remark>
  <p>
    In addition to the possibility that functions are given by formulas,
    functions can be given by tables or graphs.
    We can think about composite functions in these settings as well,
    and the following activities prompt us to consider functions given in this way.
  </p>
</remark>

<!-- The following two activities are adapted from APC, Activity 1.6.2 
https://activecalculus.org/prelude/sec-changing-composite.html#act-changing-composite-tables-graphs -->


<activity xml:id="activity-fn5-graph">
  <introduction>
    <p>
Let functions <m>p</m> and <m>q</m> be given by the graphs below. </p>
  
<p>
    INSERT GRAPH (OR SAGEPLOT VERSION) OF GRAPH FROM <url href="https://activecalculus.org/prelude/sec-changing-composite.html#act-changing-composite-tables-graphs"></url>
</p>

      
  <p>
        Find each of the following. If something is not defined, explain why. 
    </p>
  </introduction>
    
      
  
      <task>
        <statement>
          <p>
            <m>(p \circ q)(0)</m>
          </p>
        </statement>
        <answer>
          <p>
            <m>1</m>
          </p>
        </answer>
      </task>
  
      <task>
        <statement>
          <p>
            <m>q(p(0)) </m>
          </p>
        </statement>
        <answer>
          <p>
            <m>2</m>
          </p>
        </answer>
      </task>
  
      <task>
        <statement>
          <p>
            <m>p(p(1))</m>
          </p>
        </statement>
        <answer>
          <p>
            <m>-1/2</m> 
          </p>
        </answer>
      </task>

      <task>
        <statement>
          <p>
            <m>(q \circ p)(-3)</m>
          </p>
        </statement>
        <answer>
          <p>
            0
          </p>
        </answer>
      </task>
        
      <task>
        <statement>
          <p>
            Find two values of <m>x</m> such that <m>q(p(x)) = 2</m>? 
          </p>
        </statement>
        <answer>
          <p>
            <m>x</m>-values on the interval <m>[-2,1.5]</m>
          </p>
        </answer>
      </task>
  
     
  </activity>

<activity xml:id="activity-fn5-table">
<introduction>
  <p>
  
			Let functions <m>f</m> and <m>g</m> be given by the tables below.
		

    <sidebyside width="50%" valign="middle">	
    <table>
      <tabular>
        <row header="yes" bottom="minor" >
          <cell><m>x</m></cell> 
          <cell><m>f(x)</m></cell>
        </row>
        <row halign="center">
          <cell><m>0</m></cell>
          <cell><m>6</m></cell>
        </row>
        <row halign="center">
          <cell><m>1</m></cell>
          <cell><m>4</m></cell>
        </row>
        <row halign="center">
          <cell><m>2</m></cell>
          <cell><m>3</m></cell>
        </row>
        <row halign="center">
          <cell><m>3</m></cell>
          <cell><m>4</m></cell>
        </row>
        <row halign="center">
          <cell><m>4</m></cell>
          <cell><m>7</m></cell>
        </row>
      </tabular>
    </table>  
    <table>
      <tabular>
        <row header="yes" bottom="minor" >
          <cell><m>x</m></cell> 
          <cell><m>g(x)</m></cell>
        </row>
        <row halign="center">
          <cell><m>0</m></cell>
          <cell><m>1</m></cell>
        </row>
        <row halign="center">
          <cell><m>1</m></cell>
          <cell><m>3</m></cell>
        </row>
        <row halign="center">
          <cell><m>2</m></cell>
          <cell><m>0</m></cell>
        </row>
        <row halign="center">
          <cell><m>3</m></cell>
          <cell><m>5</m></cell>
        </row>
        <row halign="center">
          <cell><m>4</m></cell>
          <cell><m>2</m></cell>
        </row>
      </tabular>
    </table>  
    </sidebyside>

      Find each of the following. If something is not defined, explain why. 
  </p>
</introduction>
	
		

    <task>
      <statement>
        <p>
          <m>(f \circ g)(2)</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>6</m>
        </p>
      </answer>
    </task>

    <task>
      <statement>
        <p>
          <m>(g \circ f)(3)</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>2</m>
        </p>
      </answer>
    </task>

    <task>
      <statement>
        <p>
          <m>g(f(4))</m>
        </p>
      </statement>
      <answer>
        <p>
          not defined because <m>f(4)=7</m> and <m>7</m> isn't in the domain of <m>g(x)</m>
        </p>
      </answer>
    </task>
			
    <task>
      <statement>
        <p>
          For what value(s) of <m>x</m> is <m>f(g(x)) = 4</m>? 
        </p>
      </statement>
      <answer>
        <p>
          <m>0, 1</m>
        </p>
      </answer>
    </task>

    <task>
      <statement>
        <p>
          What are the domain and range of <m>(f\circ g)(x)</m>? 
        </p>
      </statement>
      <answer>
        <p>
          Domain: <m>\{0,1,2,3,4 \}</m> and  
          Range: <m> \{3,4,6 \}</m>
        </p>
      </answer>
    </task>
</activity>




    </subsection>

    <subsection>
        <title>Videos</title>
        <p>It would be great to include videos down here, like in the Calculus book!</p>
    </subsection>
</section>